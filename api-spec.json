{
  "openapi": "3.0.0",
  "info": {
    "title": "Marketing Analytics Dashboard API",
    "description": "API for managing marketing analytics across Facebook Ads, Google Ads, GoHighLevel, and Google Sheets",
    "version": "1.0.0",
    "contact": {
      "name": "Tulen Agency",
      "email": "steve@tulenagency.com"
    }
  },
  "servers": [
    {
      "url": "http://localhost:3000",
      "description": "Development server"
    },
    {
      "url": "https://tulenreporting.vercel.app",
      "description": "Production server"
    }
  ],
  "paths": {
    "/api-testing": {
      "get": {
        "summary": "API Testing Dashboard",
        "description": "Access the API testing interface to test all integrations",
        "tags": ["Testing"],
        "responses": {
          "200": {
            "description": "API testing page loaded successfully"
          }
        }
      }
    },
    "/oauth/callback": {
      "get": {
        "summary": "OAuth Callback Handler",
        "description": "Handles OAuth callbacks from Google Ads, Google Sheets, Facebook Ads, and GoHighLevel",
        "tags": ["Authentication"],
        "parameters": [
          {
            "name": "code",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Authorization code from OAuth provider"
          },
          {
            "name": "state",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "State parameter for CSRF protection"
          }
        ],
        "responses": {
          "200": {
            "description": "OAuth callback processed successfully"
          },
          "400": {
            "description": "Invalid OAuth callback"
          }
        }
      }
    },
    "/api/venues": {
      "get": {
        "summary": "Get All Venues (Clients)",
        "description": "Retrieve list of all venues/clients in the system",
        "tags": ["Venues"],
        "responses": {
          "200": {
            "description": "List of venues retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Venue"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/venues/{venueId}": {
      "get": {
        "summary": "Get Venue Details",
        "description": "Get detailed information about a specific venue",
        "tags": ["Venues"],
        "parameters": [
          {
            "name": "venueId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Unique identifier for the venue"
          }
        ],
        "responses": {
          "200": {
            "description": "Venue details retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Venue"
                }
              }
            }
          },
          "404": {
            "description": "Venue not found"
          }
        }
      }
    },
    "/api/google-ads/accounts": {
      "get": {
        "summary": "Get Google Ads Accounts",
        "description": "Retrieve all Google Ads accounts for the connected user",
        "tags": ["Google Ads"],
        "responses": {
          "200": {
            "description": "Google Ads accounts retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/GoogleAdsAccount"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Not authenticated with Google Ads"
          }
        }
      }
    },
    "/api/google-sheets/spreadsheets": {
      "get": {
        "summary": "Get Google Sheets Spreadsheets",
        "description": "Retrieve all accessible Google Sheets spreadsheets",
        "tags": ["Google Sheets"],
        "responses": {
          "200": {
            "description": "Google Sheets retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/GoogleSheet"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Not authenticated with Google Sheets"
          }
        }
      }
    },
    "/api/facebook-ads/accounts": {
      "get": {
        "summary": "Get Facebook Ads Accounts",
        "description": "Retrieve all Facebook Ads accounts",
        "tags": ["Facebook Ads"],
        "responses": {
          "200": {
            "description": "Facebook Ads accounts retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/FacebookAdsAccount"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Not authenticated with Facebook Ads"
          }
        }
      }
    },
    "/api/ghl/locations": {
      "get": {
        "summary": "Get GoHighLevel Locations",
        "description": "Retrieve all GoHighLevel locations",
        "tags": ["GoHighLevel"],
        "responses": {
          "200": {
            "description": "GoHighLevel locations retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/GHLLocation"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Not authenticated with GoHighLevel"
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "Venue": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique identifier for the venue"
          },
          "name": {
            "type": "string",
            "description": "Name of the venue"
          },
          "type": {
            "type": "string",
            "enum": ["Client"],
            "description": "Type of venue"
          },
          "status": {
            "type": "string",
            "enum": ["active", "inactive"],
            "description": "Status of the venue"
          },
          "location": {
            "type": "string",
            "description": "Physical location of the venue"
          },
          "services": {
            "$ref": "#/components/schemas/Services"
          },
          "accounts": {
            "$ref": "#/components/schemas/Accounts"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "When the venue was created"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "When the venue was last updated"
          }
        }
      },
      "Services": {
        "type": "object",
        "properties": {
          "facebookAds": {
            "type": "boolean",
            "description": "Whether Facebook Ads is enabled"
          },
          "googleAds": {
            "type": "boolean",
            "description": "Whether Google Ads is enabled"
          },
          "crm": {
            "type": "boolean",
            "description": "Whether CRM (GoHighLevel) is enabled"
          },
          "revenue": {
            "type": "boolean",
            "description": "Whether revenue tracking (Google Sheets) is enabled"
          }
        }
      },
      "Accounts": {
        "type": "object",
        "properties": {
          "facebookAds": {
            "type": "string",
            "description": "Facebook Ads account ID"
          },
          "googleAds": {
            "type": "string",
            "description": "Google Ads account ID"
          },
          "goHighLevel": {
            "oneOf": [
              {
                "type": "string",
                "description": "GoHighLevel location ID as string"
              },
              {
                "type": "object",
                "properties": {
                  "locationId": {
                    "type": "string"
                  },
                  "locationName": {
                    "type": "string"
                  }
                }
              }
            ]
          },
          "googleSheets": {
            "type": "string",
            "description": "Google Sheets account ID"
          }
        }
      },
      "GoogleAdsAccount": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Google Ads account ID"
          },
          "name": {
            "type": "string",
            "description": "Account name"
          },
          "status": {
            "type": "string",
            "enum": ["active", "paused", "inactive"],
            "description": "Account status"
          },
          "currency": {
            "type": "string",
            "description": "Account currency"
          },
          "timezone": {
            "type": "string",
            "description": "Account timezone"
          }
        }
      },
      "GoogleSheet": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Google Sheets spreadsheet ID"
          },
          "name": {
            "type": "string",
            "description": "Spreadsheet name"
          },
          "url": {
            "type": "string",
            "format": "uri",
            "description": "Spreadsheet URL"
          },
          "lastModified": {
            "type": "string",
            "format": "date-time",
            "description": "Last modified date"
          },
          "sheetCount": {
            "type": "integer",
            "description": "Number of sheets in the spreadsheet"
          }
        }
      },
      "FacebookAdsAccount": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Facebook Ads account ID"
          },
          "name": {
            "type": "string",
            "description": "Account name"
          },
          "status": {
            "type": "string",
            "enum": ["active", "paused", "inactive"],
            "description": "Account status"
          },
          "currency": {
            "type": "string",
            "description": "Account currency"
          },
          "timezone": {
            "type": "string",
            "description": "Account timezone"
          }
        }
      },
      "GHLLocation": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "GoHighLevel location ID"
          },
          "name": {
            "type": "string",
            "description": "Location name"
          },
          "address": {
            "type": "string",
            "description": "Location address"
          },
          "city": {
            "type": "string",
            "description": "City"
          },
          "state": {
            "type": "string",
            "description": "State"
          },
          "phone": {
            "type": "string",
            "description": "Phone number"
          },
          "website": {
            "type": "string",
            "format": "uri",
            "description": "Website URL"
          },
          "timezone": {
            "type": "string",
            "description": "Timezone"
          },
          "currency": {
            "type": "string",
            "description": "Currency"
          },
          "status": {
            "type": "string",
            "description": "Location status"
          }
        }
      }
    }
  },
  "tags": [
    {
      "name": "Venues",
      "description": "Operations related to venues/clients"
    },
    {
      "name": "Google Ads",
      "description": "Google Ads API operations"
    },
    {
      "name": "Google Sheets",
      "description": "Google Sheets API operations"
    },
    {
      "name": "Facebook Ads",
      "description": "Facebook Ads API operations"
    },
    {
      "name": "GoHighLevel",
      "description": "GoHighLevel API operations"
    },
    {
      "name": "Authentication",
      "description": "OAuth authentication operations"
    },
    {
      "name": "Testing",
      "description": "API testing operations"
    }
  ]
}
